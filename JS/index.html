<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>DevExtreme Sample</title>
    <link rel="stylesheet" type="text/css" href="css/dx.common.css" />
    <link rel="stylesheet" type="text/css" href="css/dx.light.css" />

    <script type="text/javascript" src="js/jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src="js/knockout-3.4.0.js"></script>

    <script type="text/javascript" src="js/cldr.min.js"></script>
    <script type="text/javascript" src="js/cldr/event.min.js"></script>
    <script type="text/javascript" src="js/cldr/supplemental.min.js"></script>
    <script type="text/javascript" src="js/globalize.min.js"></script>
    <script type="text/javascript" src="js/globalize/message.min.js"></script>
    <script type="text/javascript" src="js/globalize/number.min.js"></script>
    <script type="text/javascript" src="js/globalize/currency.min.js"></script>
    <script type="text/javascript" src="js/globalize/date.min.js"></script>
    <script type="text/javascript" src="js/dx.all.js"></script>

    <script type="text/javascript" src="js/localization/dx.all.de.js"></script>

</head>

<body>

    <div id="demo">
        <div data-bind="dxButton: btnOptions"></div>
        <div data-bind="dxDateBox: dateOptions"></div>
        <div data-bind="dxDataGrid: dataGridOptions"></div>
    </div>

    <script>
        var s = 55;
        var random = function () {
            s = Math.sin(s) * 10000;
            return s - Math.floor(s);
        };
        var generateData = function (count) {
            var i;
            var surnames = ['Smith', 'Johnson', 'Brown', 'Taylor', 'Anderson', 'Harris', 'Clark', 'Allen', 'Scott', 'Carter'];
            var names = ['James', 'John', 'Robert', 'Christopher', 'George', 'Mary', 'Nancy', 'Sandra', 'Michelle', 'Betty'];
            var sex = ['Male', 'Female'];
            var items = [],
                startBirthDate = Date.parse('1/1/1975'),
                endBirthDate = Date.parse('1/1/1992');

            for (i = 0; i < count; i++) {
                var nameIndex = Math.floor(random() * names.length);
                var item = {
                    firstName: names[nameIndex],
                    lastName: surnames[Math.floor(random() * surnames.length)],
                    sex: sex[Math.floor(nameIndex / 5)],
                    birthdate: new Date(startBirthDate + Math.floor(random() * (endBirthDate - startBirthDate)))
                };
                items.push(item);
            }
            return items;
        };

        $(function () {
            $.when(
                  $.getJSON("cldr/main/de/ca-gregorian.json"),
                  $.getJSON("cldr/main/de/numbers.json"),
                  $.getJSON("cldr/main/de/currencies.json"),
                  $.getJSON("cldr/supplemental/likelySubtags.json"),
                  $.getJSON("cldr/supplemental/timeData.json"),
                  $.getJSON("cldr/supplemental/weekData.json"),
                  $.getJSON("cldr/supplemental/currencyData.json"),
                  $.getJSON("cldr/supplemental/numberingSystems.json")
                ).then(function () {
                    return [].slice.apply(arguments, [0]).map(function (result) {
                        return result[0];
                    });
                }).then(
                    Globalize.load
                ).then(function () {
                    Globalize.loadMessages({
                        de: {
                            "btnText": "Klick mich",
                            "alertMessage": "Ich habe geklickt",
                            "alertTitle": "Alarm Titel"
                        }
                    })
                    Globalize.locale('de');

                    var viewModel = {
                        dataGridOptions: {
                            dataSource: generateData(5),
                            editing: {
                                mode: "row",
                                allowUpdating: true,
                                allowDeleting: true,
                                allowAdding: true
                            }
                        },
                        btnOptions: {
                            text: Globalize.formatMessage("btnText"),
                                onClick: function () {
                                    DevExpress.ui.dialog.alert(Globalize.formatMessage("alertMessage"), Globalize.formatMessage("alertTitle"));
                                }
                        },
                        dateOptions: {
                            value: new Date()
                        }
                    };

                    ko.applyBindings(viewModel, document.getElementById("demo"));

                });
        })
    </script>

</body>
</html>
